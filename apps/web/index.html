<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Local CRM Workspace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-slate-50 text-slate-900">
    <div id="app" class="min-h-screen">
      <section id="login-view" class="min-h-screen flex items-center justify-center p-6">
        <div class="w-full max-w-md rounded-2xl bg-white shadow-xl p-8">
          <h1 class="text-2xl font-semibold">Local CRM</h1>
          <p class="text-sm text-slate-500 mt-2">Sign in to your workspace</p>
          <form id="login-form" class="mt-6 space-y-4">
            <div>
              <label class="text-sm font-medium">Email</label>
              <input
                type="email"
                name="email"
                class="mt-1 w-full rounded-lg border border-slate-200 p-2"
                placeholder="admin@localcrm.test"
                required
              />
            </div>
            <div>
              <label class="text-sm font-medium">Password</label>
              <input
                type="password"
                name="password"
                class="mt-1 w-full rounded-lg border border-slate-200 p-2"
                placeholder="password123"
                required
              />
            </div>
            <button
              type="submit"
              class="w-full rounded-lg bg-slate-900 text-white py-2 font-medium hover:bg-slate-800"
            >
              Sign in
            </button>
          </form>
          <div class="mt-4 text-xs text-slate-500">
            Demo users: admin@localcrm.test / password123 or member@localcrm.test / password123
          </div>
        </div>
      </section>

      <section id="main-view" class="hidden">
        <div class="flex">
          <aside class="w-64 bg-white border-r border-slate-200 min-h-screen p-6">
            <div class="flex items-center gap-2">
              <div class="h-10 w-10 rounded-xl bg-indigo-500 text-white flex items-center justify-center font-bold">LC</div>
              <div>
                <p class="text-sm text-slate-500">Workspace</p>
                <h2 class="font-semibold">Local CRM</h2>
              </div>
            </div>
            <nav class="mt-10 space-y-2">
              <button data-view="dashboard" class="nav-item">Dashboard</button>
              <button data-view="deals" class="nav-item">Deals</button>
              <button data-view="companies" class="nav-item">Companies</button>
              <button data-view="contacts" class="nav-item">Contacts</button>
              <button data-view="tasks" class="nav-item">Tasks</button>
            </nav>
            <div class="mt-10 border-t border-slate-200 pt-6">
              <button id="logout-button" class="text-sm text-slate-500 hover:text-slate-900">Logout</button>
            </div>
          </aside>

          <div class="flex-1 min-h-screen">
            <header class="flex items-center justify-between border-b border-slate-200 bg-white px-8 py-4">
              <div>
                <h1 id="page-title" class="text-xl font-semibold">Dashboard</h1>
                <p class="text-sm text-slate-500">Plan, track, and close your deals</p>
              </div>
              <div class="flex items-center gap-4">
                <div class="relative">
                  <input
                    type="text"
                    id="global-search"
                    placeholder="Search..."
                    class="rounded-full border border-slate-200 px-4 py-2 text-sm"
                  />
                </div>
                <div id="user-pill" class="rounded-full bg-slate-100 px-4 py-2 text-sm font-medium"></div>
              </div>
            </header>

            <main class="p-8 space-y-10">
              <section id="dashboard-view" class="view-section">
                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
                  <div class="card">
                    <p class="text-sm text-slate-500">Total deals</p>
                    <h3 id="metric-total-deals" class="metric">0</h3>
                  </div>
                  <div class="card">
                    <p class="text-sm text-slate-500">Pipeline value</p>
                    <h3 id="metric-pipeline" class="metric">$0</h3>
                  </div>
                  <div class="card">
                    <p class="text-sm text-slate-500">Deals closing this month</p>
                    <h3 id="metric-closing" class="metric">0</h3>
                  </div>
                  <div class="card">
                    <p class="text-sm text-slate-500">Total tasks</p>
                    <h3 id="metric-tasks" class="metric">0</h3>
                    <p class="text-xs text-rose-500 mt-1" id="metric-overdue">0 overdue</p>
                  </div>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                  <div class="card xl:col-span-2">
                    <h4 class="card-title">Deals by stage</h4>
                    <canvas id="deals-stage-chart" height="140"></canvas>
                  </div>
                  <div class="card">
                    <h4 class="card-title">Won vs Lost</h4>
                    <canvas id="won-lost-chart" height="140"></canvas>
                  </div>
                  <div class="card xl:col-span-2">
                    <h4 class="card-title">Tasks by status</h4>
                    <canvas id="tasks-status-chart" height="120"></canvas>
                  </div>
                  <div class="card">
                    <h4 class="card-title">Recent activity</h4>
                    <ul id="activity-feed" class="space-y-3 text-sm text-slate-600"></ul>
                  </div>
                </div>
              </section>

              <section id="deals-view" class="view-section hidden">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <button id="kanban-toggle" class="pill-button active">Kanban</button>
                    <button id="table-toggle" class="pill-button">Table</button>
                  </div>
                  <div class="text-sm text-slate-500">Drag deals between stages to update</div>
                </div>
                <div id="kanban-board" class="mt-6 grid grid-cols-1 md:grid-cols-3 xl:grid-cols-6 gap-4"></div>
                <div id="table-board" class="mt-6 hidden overflow-x-auto">
                  <table class="w-full text-sm text-left border-separate" style="border-spacing: 0 0.5rem">
                    <thead>
                      <tr class="text-slate-500">
                        <th class="px-4">Deal</th>
                        <th class="px-4">Company</th>
                        <th class="px-4">Stage</th>
                        <th class="px-4">Amount</th>
                        <th class="px-4">Owner</th>
                        <th class="px-4">Close date</th>
                      </tr>
                    </thead>
                    <tbody id="deals-table"></tbody>
                  </table>
                </div>
              </section>

              <section id="companies-view" class="view-section hidden">
                <div class="card">
                  <h4 class="card-title">Companies</h4>
                  <div id="companies-list" class="grid md:grid-cols-2 gap-4"></div>
                </div>
              </section>

              <section id="contacts-view" class="view-section hidden">
                <div class="card">
                  <h4 class="card-title">Contacts</h4>
                  <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                      <thead>
                        <tr class="text-slate-500">
                          <th class="px-4 py-2">Name</th>
                          <th class="px-4 py-2">Company</th>
                          <th class="px-4 py-2">Email</th>
                          <th class="px-4 py-2">Phone</th>
                          <th class="px-4 py-2">Title</th>
                        </tr>
                      </thead>
                      <tbody id="contacts-table"></tbody>
                    </table>
                  </div>
                </div>
              </section>

              <section id="tasks-view" class="view-section hidden">
                <div class="card">
                  <h4 class="card-title">Tasks</h4>
                  <div id="tasks-list" class="space-y-4"></div>
                </div>
              </section>
            </main>
          </div>
        </div>
      </section>
    </div>

    <div id="toast" class="toast hidden"></div>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
